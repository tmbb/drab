    <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.17.1">
    <title>Drab – drab v0.5.6</title>
    <link rel="stylesheet" href="dist/app-110d9134a6.css" />
    
    
      
        <link rel="icon" type="image/png" href="assets/logo.png" />
      
      
    
    <script src="dist/sidebar_items-6fa2c1b3f2.js"></script>
    <link rel="stylesheet" href="assets/makedown.css"/>
  </head>
  <body data-type="modules">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>

    <div class="main">
<button class="sidebar-toggle">
  <span class="icon-menu" aria-hidden="true"></span>
  <span class="sr-only">Toggle Sidebar</span>
</button>
<section class="sidebar">

  
  <a href="Drab.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        drab
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.5.6
      </h2>
    </div>
    
      <img src="assets/logo.png" alt="drab" class="sidebar-projectImage">
    
  </a>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <input name="q" type="text" id="search-list" class="search-input" placeholder="search" aria-label="Search" autocomplete="off" />
  </form>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    
      <li><a id="exceptions-list" href="#full-list">Exceptions</a></li>
    

    
      <li><a id="tasks-list" href="#full-list">Mix Tasks</a></li>
    
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


      <h1>
        <small class="visible-xs">drab v0.5.6</small>
        Drab
        
      </h1>

      
        <section id="moduledoc">
          <p>Drab allows to query and manipulate the User Interface directly from the Phoenix server backend.</p>
<p>To enable it on the specific page you must find its controller and
enable Drab by <code class="inline">use Drab.Controller</code> there:</p>
<pre><code class="nohighlight makeup"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">DrabExample.PageController</span><span class="w"> </span><span class="k" data-group-id="74">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Example.Web</span><span class="p">,</span><span class="w"> </span><span class="ss">:controller</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Drab.Controller</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">index</span><span class="p" data-group-id="55">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="n">_params</span><span class="p" data-group-id="55">)</span><span class="w"> </span><span class="k" data-group-id="71">do</span><span class="w">
    </span><span class="n">render</span><span class="w"> </span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;index.html&quot;</span><span class="w">
  </span><span class="k" data-group-id="71">end</span><span class="w">
</span><span class="k" data-group-id="74">end</span></code></pre>
<p>Notice that it will enable Drab on all the pages generated by <code class="inline">DrabExample.PageController</code>.</p>
<p>All Drab functions (callbacks and event handlers) should be placed in a module called ‘commander’. It is very
similar to controller, but it does not render any pages - it works with the live page instead. Each controller with
enabled Drab should have the corresponding commander.</p>
<pre><code class="nohighlight makeup"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">DrabExample.PageCommander</span><span class="w"> </span><span class="k" data-group-id="108">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Drab.Commander</span><span class="w">

  </span><span class="n">onload</span><span class="w"> </span><span class="ss">:page_loaded</span><span class="w">

  </span><span class="c1"># Drab Callbacks
</span><span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">page_loaded</span><span class="p" data-group-id="52">(</span><span class="n">socket</span><span class="p" data-group-id="52">)</span><span class="w"> </span><span class="k" data-group-id="76">do</span><span class="w">
    </span><span class="n">set_prop</span><span class="w"> </span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;div.jumbotron h2&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">innerHTML</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This page has been DRABBED&quot;</span><span class="w">
  </span><span class="k" data-group-id="76">end</span><span class="w">

  </span><span class="c1"># Drab Events
</span><span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">button_clicked</span><span class="p" data-group-id="85">(</span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="n">sender</span><span class="p" data-group-id="85">)</span><span class="w"> </span><span class="k" data-group-id="106">do</span><span class="w">
    </span><span class="n">set_prop</span><span class="w"> </span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="p" data-group-id="97">(</span><span class="n">sender</span><span class="p" data-group-id="97">)</span><span class="p">,</span><span class="w"> </span><span class="ss">innerText</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;already clicked&quot;</span><span class="w">
  </span><span class="k" data-group-id="106">end</span><span class="w">

</span><span class="k" data-group-id="108">end</span></code></pre>
<h2 id="module-debugging-drab-in-iex" class="section-heading">
  <a href="#module-debugging-drab-in-iex" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Debugging Drab in IEx
</h2>

<p>When started with iex (<code class="inline">iex -S mix phoenix.server</code>) Drab shows the helpful message on how to debug its functions:</p>
<pre><code class="nohighlight makeup"><span class="w">    </span><span class="nc">Started</span><span class="w"> </span><span class="nc">Drab</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">/</span><span class="n">drab</span><span class="o">/</span><span class="n">docs</span><span class="p">,</span><span class="w"> </span><span class="n">handling</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">DrabPoc.DocsCommander</span><span class="w">
    </span><span class="nc">You</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="nc">Drab</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">IEx</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">copy</span><span class="o">/</span><span class="n">paste</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">following</span><span class="p">:</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">Drab</span><span class="o">.</span><span class="p" data-group-id="92">{</span><span class="nc">Core</span><span class="p">,</span><span class="w"> </span><span class="nc">Query</span><span class="p">,</span><span class="w"> </span><span class="nc">Modal</span><span class="p">,</span><span class="w"> </span><span class="nc">Waiter</span><span class="p" data-group-id="92">}</span><span class="w">
</span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Drab</span><span class="o">.</span><span class="n">get_socket</span><span class="p" data-group-id="114">(</span><span class="n">pid</span><span class="p" data-group-id="113">(</span><span class="s2">&quot;0.443.0&quot;</span><span class="p" data-group-id="113">)</span><span class="p" data-group-id="114">)</span><span class="w">

    </span><span class="ss">Examples</span><span class="p">:</span><span class="w">
</span><span class="n">socket</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">select</span><span class="p" data-group-id="125">(</span><span class="ss">:htmls</span><span class="p">,</span><span class="w"> </span><span class="ss">from</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;h4&quot;</span><span class="p" data-group-id="125">)</span><span class="w">
</span><span class="n">socket</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">exec_js</span><span class="p" data-group-id="141">(</span><span class="s2">&quot;alert(&apos;hello from IEx!&apos;)&quot;</span><span class="p" data-group-id="141">)</span><span class="w">
</span><span class="n">socket</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">alert</span><span class="p" data-group-id="158">(</span><span class="s2">&quot;Title&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Sure?&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">buttons</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="157">[</span><span class="ss">ok</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Azaliż&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">cancel</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Poniechaj&quot;</span><span class="p" data-group-id="157">]</span><span class="p" data-group-id="158">)</span></code></pre>
<p>All you need to do is to copy/paste the line with <code class="inline">socket = ...</code> and now you can run Drab function directly
from IEx, observing the results on the running browser in the realtime.</p>
<h2 id="module-handling-exceptions" class="section-heading">
  <a href="#module-handling-exceptions" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Handling Exceptions
</h2>

<p>Drab intercepts all exceptions from event handler function and let it die, but before it presents the error message
in the logs, and, for development environment, on the page. For production, it shows just an alert with
the generic error.</p>
<p>By default it is just an alert(), but you can easly override it by creating the template in the
<code class="inline">priv/templates/drab/drab.handler_error.prod.js</code> folder with your own javascript presenting the message.</p>
<h2 id="module-modules" class="section-heading">
  <a href="#module-modules" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Modules
</h2>

<p>Drab is modular. You may choose which modules to use in the specific Commander by using <code class="inline">:module</code> option
in <code class="inline">use Drab.Commander</code> directive. By default, <a href="Drab.Live.html"><code class="inline">Drab.Live</code></a> and <a href="Drab.Element.html"><code class="inline">Drab.Element</code></a> are loaded, but you may override it
using  <code class="inline">modules</code> option with <code class="inline">use Drab.Commander</code> directive.</p>
<p>Every module must have the corresponding javascript template, which is added to the client code in case
the module is loaded.</p>
<p><a href="Drab.Core.html"><code class="inline">Drab.Core</code></a> module is always loaded.</p>
<h2 id="module-learnig-drab" class="section-heading">
  <a href="#module-learnig-drab" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Learnig Drab
</h2>

<p>There is a <a href="https://tg.pl/drab">tutorial/demo page</a>.</p>
<p>The point to start reading docs should be <a href="Drab.Core.html"><code class="inline">Drab.Core</code></a>.</p>

        </section>
      

      
        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>
          
  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#t:t/0">t()</a>
  </div>
  
</div>

  </div>


          
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#pid/1">pid(socket)</a>
  </div>
  
    <div class="summary-synopsis"><p>Extract Drab PID from the socket</p>
</div>
  
</div>

  </div>


          

        </section>
      

      
        <section id="types" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#types">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Types
          </h1>
          <div class="types-list">
            <div class="detail" id="t:t/0">
  
  
  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">t()</span>
    
    
    
      <div class="specs">
        
          <pre>t() :: %Drab{commander: atom, priv: map, session: map, socket: <a href="https://hexdocs.pm/phoenix/1.3.0/Phoenix.Socket.html#t:t/0">Phoenix.Socket.t</a>, store: map}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>

          </div>
        </section>
      

      
        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Functions
          </h1>
          <div class="detail" id="pid/1">
  
  
  <div class="detail-header">
    <a href="#pid/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">pid(socket)</span>
    
    
    
  </div>
  <section class="docstring">
    <p>Extract Drab PID from the socket</p>

  </section>
</div>

        </section>
      

      
          <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.17.1),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle"><span class="sr-only">Switch theme</span></button>
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-4cfb39be16.js"></script>
  <script src="assets/makedown.js"></script>
  </body>
</html>

