    <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.17.1">
    <title>Drab.Waiter â€“ drab v0.5.6</title>
    <link rel="stylesheet" href="dist/app-110d9134a6.css" />
    
    
      
        <link rel="icon" type="image/png" href="assets/logo.png" />
      
      
    
    <script src="dist/sidebar_items-6fa2c1b3f2.js"></script>
    <link rel="stylesheet" href="assets/makedown.css"/>
  </head>
  <body data-type="modules">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>

    <div class="main">
<button class="sidebar-toggle">
  <span class="icon-menu" aria-hidden="true"></span>
  <span class="sr-only">Toggle Sidebar</span>
</button>
<section class="sidebar">

  
  <a href="Drab.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        drab
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.5.6
      </h2>
    </div>
    
      <img src="assets/logo.png" alt="drab" class="sidebar-projectImage">
    
  </a>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <input name="q" type="text" id="search-list" class="search-input" placeholder="search" aria-label="Search" autocomplete="off" />
  </form>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    
      <li><a id="exceptions-list" href="#full-list">Exceptions</a></li>
    

    
      <li><a id="tasks-list" href="#full-list">Mix Tasks</a></li>
    
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


      <h1>
        <small class="visible-xs">drab v0.5.6</small>
        Drab.Waiter
        
      </h1>

      
        <section id="moduledoc">
          <p>Enables Drab Waiter functionality - synchronous wait for browser events in the Commander handler function. </p>
<p>Introduces DSL for register events. Syntax:</p>
<pre><code class="nohighlight makeup"><span class="n">waiter</span><span class="p" data-group-id="47">(</span><span class="n">socket</span><span class="p" data-group-id="47">)</span><span class="w"> </span><span class="k" data-group-id="116">do</span><span class="w">
  </span><span class="n">on</span><span class="w"> </span><span class="s2">&quot;selector1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;event_name&quot;</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="65">fn</span><span class="w"> </span><span class="p" data-group-id="57">(</span><span class="n">sender</span><span class="p" data-group-id="57">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="k" data-group-id="65">end</span><span class="w">
  </span><span class="n">on</span><span class="w"> </span><span class="s2">&quot;selector2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;event_name&quot;</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="96">fn</span><span class="w"> </span><span class="p" data-group-id="90">(</span><span class="n">sender</span><span class="p" data-group-id="90">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="k" data-group-id="96">end</span><span class="w"> 
  </span><span class="n">on_timeout</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="109">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k" data-group-id="109">end</span><span class="w">
</span><span class="k" data-group-id="116">end</span></code></pre>
<p>Requires Drab.Query.</p>

        </section>
      

      
        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>
          

          
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#on/3">on(selector, event_name, function)</a>
  </div>
  
    <div class="summary-synopsis"><p>Registers Javascript <code class="inline">event_name</code> on <code class="inline">selector</code> in the Drab Waiter loop. When the main loop is launched, Drab 
freezes the current function process and starts waiting for the events. When event occurs, it matches it and 
runs the corresponding lambda</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#on_timeout/2">on_timeout(timeout, function)</a>
  </div>
  
    <div class="summary-synopsis"><p>Register timeout event in Drab Waiter loop. Launches anonymous function after given time (in milliseconds).
When no timeout is given, Waiter will wait forever</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#waiter/2">waiter(socket, list)</a>
  </div>
  
    <div class="summary-synopsis"><p>Main Waiter loop</p>
</div>
  
</div>

  </div>


          

        </section>
      

      

      
        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Functions
          </h1>
          <div class="detail" id="on/3">
  
  
  <div class="detail-header">
    <a href="#on/3" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <span class="signature">on(selector, event_name, function)</span>
    
    
      <span class="note">(macro)</span>
    
    
  </div>
  <section class="docstring">
    <p>Registers Javascript <code class="inline">event_name</code> on <code class="inline">selector</code> in the Drab Waiter loop. When the main loop is launched, Drab 
freezes the current function process and starts waiting for the events. When event occurs, it matches it and 
runs the corresponding lambda.</p>
<p>Example:</p>
<pre><code class="nohighlight makeup"><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">waiter</span><span class="p" data-group-id="139">(</span><span class="n">socket</span><span class="p" data-group-id="139">)</span><span class="w"> </span><span class="k" data-group-id="168">do</span><span class="w">
  </span><span class="n">on</span><span class="w"> </span><span class="s2">&quot;#button1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="156">fn</span><span class="p" data-group-id="150">(</span><span class="n">sender</span><span class="p" data-group-id="150">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sender</span><span class="p" data-group-id="154">[</span><span class="s2">&quot;text&quot;</span><span class="p" data-group-id="154">]</span><span class="w"> </span><span class="k" data-group-id="156">end</span><span class="w">
  </span><span class="n">on</span><span class="w"> </span><span class="s2">&quot;#input1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;keyup&quot;</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="166">fn</span><span class="p" data-group-id="161">(</span><span class="n">sender</span><span class="p" data-group-id="161">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sender</span><span class="p" data-group-id="164">[</span><span class="s2">&quot;val&quot;</span><span class="p" data-group-id="164">]</span><span class="w"> </span><span class="k" data-group-id="166">end</span><span class="w">
</span><span class="k" data-group-id="168">end</span></code></pre>
<p>Lambda receives sender: the same Map as the Event Handler does, known there are <code class="inline">dom_sender</code>.</p>

  </section>
</div>
<div class="detail" id="on_timeout/2">
  
  
  <div class="detail-header">
    <a href="#on_timeout/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <span class="signature">on_timeout(timeout, function)</span>
    
    
      <span class="note">(macro)</span>
    
    
  </div>
  <section class="docstring">
    <p>Register timeout event in Drab Waiter loop. Launches anonymous function after given time (in milliseconds).
When no timeout is given, Waiter will wait forever.</p>
<p>Example: </p>
<pre><code class="nohighlight makeup"><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">waiter</span><span class="p" data-group-id="177">(</span><span class="n">socket</span><span class="p" data-group-id="177">)</span><span class="w"> </span><span class="k" data-group-id="200">do</span><span class="w">
  </span><span class="n">on</span><span class="w"> </span><span class="s2">&quot;#button1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;click&quot;</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="193">fn</span><span class="p" data-group-id="187">(</span><span class="n">sender</span><span class="p" data-group-id="187">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sender</span><span class="p" data-group-id="191">[</span><span class="s2">&quot;text&quot;</span><span class="p" data-group-id="191">]</span><span class="w"> </span><span class="k" data-group-id="193">end</span><span class="w">
  </span><span class="n">on_timeout</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="198">fn</span><span class="p" data-group-id="197">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;timed out&quot;</span><span class="w"> </span><span class="k" data-group-id="198">end</span><span class="w">
</span><span class="k" data-group-id="200">end</span></code></pre>

  </section>
</div>
<div class="detail" id="waiter/2">
  
  
  <div class="detail-header">
    <a href="#waiter/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <span class="signature">waiter(socket, list)</span>
    
    
      <span class="note">(macro)</span>
    
    
  </div>
  <section class="docstring">
    <p>Main Waiter loop. </p>
<p>Takes socket as an argument, returns the return value of the function which matched the selector and event.</p>
<p>Inside the <code class="inline">do</code> block you may register Browser Events which Waiter will react to. See <code class="inline">Drab.Waiter.on</code>.</p>

  </section>
</div>

        </section>
      

      
          <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.17.1),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle"><span class="sr-only">Switch theme</span></button>
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-4cfb39be16.js"></script>
  <script src="assets/makedown.js"></script>
  </body>
</html>

